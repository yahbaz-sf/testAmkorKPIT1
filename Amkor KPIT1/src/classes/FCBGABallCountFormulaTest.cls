@isTest
public with sharing class FCBGABallCountFormulaTest 
{
	public static testmethod void testValues()
	{
		RFQ_Item__c item = new RFQ_Item__c();
		insert item;

		List<RFQI_fcBGA__c> insertItems = new List<RFQI_fcBGA__c>();
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='1.0', Body_X__c=10));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='1.0', Body_X__c=11));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='1.0', Body_X__c=12));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='1.0', Body_X__c=13));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='1.0', Body_X__c=14));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='1.0', Body_X__c=15));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='1.0', Body_X__c=17));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='1.0', Body_X__c=19));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='1.0', Body_X__c=21));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='1.0', Body_X__c=23));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='1.0', Body_X__c=25));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='1.0', Body_X__c=27));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='1.0', Body_X__c=29));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='1.0', Body_X__c=31));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='1.0', Body_X__c=33));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='1.0', Body_X__c=35));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='1.0', Body_X__c=37.5));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='1.0', Body_X__c=40));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='1.0', Body_X__c=42.5));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='1.0', Body_X__c=45));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='1.0', Body_X__c=47.5));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='1.0', Body_X__c=50));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='1.0', Body_X__c=52.5));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='1.0', Body_X__c=55));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.8', Body_X__c=10));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.8', Body_X__c=11));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.8', Body_X__c=12));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.8', Body_X__c=13));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.8', Body_X__c=14));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.8', Body_X__c=15));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.8', Body_X__c=17));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.8', Body_X__c=19));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.8', Body_X__c=21));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.8', Body_X__c=23));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.8', Body_X__c=25));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.8', Body_X__c=27));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.8', Body_X__c=29));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.65', Body_X__c=10));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.65', Body_X__c=11));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.65', Body_X__c=12));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.65', Body_X__c=13));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.65', Body_X__c=14));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.65', Body_X__c=15));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.65', Body_X__c=17));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.65', Body_X__c=19));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.65', Body_X__c=21));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.65', Body_X__c=23));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.65', Body_X__c=25));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.65', Body_X__c=27));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.65', Body_X__c=29));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.65', Body_X__c=31));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.65', Body_X__c=33));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.65', Body_X__c=35));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.65', Body_X__c=37.5));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.65', Body_X__c=40));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.65', Body_X__c=42.5));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.65', Body_X__c=45));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.65', Body_X__c=47.5));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.65', Body_X__c=50));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.65', Body_X__c=52.5));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.65', Body_X__c=55));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50', Body_X__c=10));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50', Body_X__c=11));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50', Body_X__c=12));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50', Body_X__c=13));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50', Body_X__c=14));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50', Body_X__c=15));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50', Body_X__c=17));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50', Body_X__c=19));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50', Body_X__c=21));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50', Body_X__c=23));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50', Body_X__c=25));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50', Body_X__c=27));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50', Body_X__c=29));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50', Body_X__c=31));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50', Body_X__c=33));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50', Body_X__c=35));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50', Body_X__c=37.5));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50', Body_X__c=40));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50', Body_X__c=42.5));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50', Body_X__c=45));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50', Body_X__c=47.5));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50', Body_X__c=50));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50', Body_X__c=52.5));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50', Body_X__c=55));
		
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Body_X__c=55));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50'));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='1.0', Body_X__c=2));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.8', Body_X__c=2));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.65', Body_X__c=2));
		insertItems.add(new RFQI_fcBGA__c(RFQ_Item__c=item.Id, Ball_Pitch__c='0.50', Body_X__c=2));

		insert insertItems;
		
		Map<String, RFQI_fcBGA__c> items = new Map<String, RFQI_fcBGA__c>();
		List<RFQI_fcBGA__c> existingItems = [SELECT Id, Ball_Pitch__c, Body_X__c, Ball_Count_fml_2__c FROM RFQI_fcBGA__c WHERE RFQ_Item__c=:item.Id];
		for (RFQI_fcBGA__c fcbga : existingItems)
		{
			String key = fcbga.Ball_Pitch__c == null ? 'null' : fcbga.Ball_Pitch__c;
			key += '-';
			key += fcbga.Body_X__c == null ? 'null' : fcbga.Body_X__c.stripTrailingZeros().toPlainString();
			items.put(key, fcbga);
		}

		System.assertEquals(items.get('1.0-10').Ball_Count_fml_2__c,	86);
		System.assertEquals(items.get('1.0-11').Ball_Count_fml_2__c,	104);
		System.assertEquals(items.get('1.0-12').Ball_Count_fml_2__c,	125);
		System.assertEquals(items.get('1.0-13').Ball_Count_fml_2__c,	148);
		System.assertEquals(items.get('1.0-14').Ball_Count_fml_2__c,	172);
		System.assertEquals(items.get('1.0-15').Ball_Count_fml_2__c,	196);
		System.assertEquals(items.get('1.0-17').Ball_Count_fml_2__c,	256);
		System.assertEquals(items.get('1.0-19').Ball_Count_fml_2__c,	324);
		System.assertEquals(items.get('1.0-21').Ball_Count_fml_2__c,	400);
		System.assertEquals(items.get('1.0-23').Ball_Count_fml_2__c,	484);
		System.assertEquals(items.get('1.0-25').Ball_Count_fml_2__c,	576);
		System.assertEquals(items.get('1.0-27').Ball_Count_fml_2__c,	676);
		System.assertEquals(items.get('1.0-29').Ball_Count_fml_2__c,	784);
		System.assertEquals(items.get('1.0-31').Ball_Count_fml_2__c,	900);
		System.assertEquals(items.get('1.0-33').Ball_Count_fml_2__c,	1024);
		System.assertEquals(items.get('1.0-35').Ball_Count_fml_2__c,	1156);
		System.assertEquals(items.get('1.0-37.5').Ball_Count_fml_2__c,	1296);
		System.assertEquals(items.get('1.0-40').Ball_Count_fml_2__c,	1521);
		System.assertEquals(items.get('1.0-42.5').Ball_Count_fml_2__c,	1764);
		System.assertEquals(items.get('1.0-45').Ball_Count_fml_2__c,	1936);
		System.assertEquals(items.get('1.0-47.5').Ball_Count_fml_2__c,	2209);
		System.assertEquals(items.get('1.0-50').Ball_Count_fml_2__c,	2401);
		System.assertEquals(items.get('1.0-52.5').Ball_Count_fml_2__c,	2601);
		System.assertEquals(items.get('1.0-55').Ball_Count_fml_2__c,	2916);
		System.assertEquals(items.get('0.8-10').Ball_Count_fml_2__c,	124);
		System.assertEquals(items.get('0.8-11').Ball_Count_fml_2__c,	152);
		System.assertEquals(items.get('0.8-12').Ball_Count_fml_2__c,	183);
		System.assertEquals(items.get('0.8-13').Ball_Count_fml_2__c,	218);
		System.assertEquals(items.get('0.8-14').Ball_Count_fml_2__c,	255);
		System.assertEquals(items.get('0.8-15').Ball_Count_fml_2__c,	296);
		System.assertEquals(items.get('0.8-17').Ball_Count_fml_2__c,	400);
		System.assertEquals(items.get('0.8-19').Ball_Count_fml_2__c,	484);
		System.assertEquals(items.get('0.8-21').Ball_Count_fml_2__c,	625);
		System.assertEquals(items.get('0.8-23').Ball_Count_fml_2__c,	729);
		System.assertEquals(items.get('0.8-25').Ball_Count_fml_2__c,	900);
		System.assertEquals(items.get('0.8-27').Ball_Count_fml_2__c,	1024);
		System.assertEquals(items.get('0.8-29').Ball_Count_fml_2__c,	1225);
		System.assertEquals(items.get('0.65-10').Ball_Count_fml_2__c,	196);
		System.assertEquals(items.get('0.65-11').Ball_Count_fml_2__c,	256);
		System.assertEquals(items.get('0.65-12').Ball_Count_fml_2__c,	289);
		System.assertEquals(items.get('0.65-13').Ball_Count_fml_2__c,	361);
		System.assertEquals(items.get('0.65-14').Ball_Count_fml_2__c,	400);
		System.assertEquals(items.get('0.65-15').Ball_Count_fml_2__c,	484);
		System.assertEquals(items.get('0.65-17').Ball_Count_fml_2__c,	625);
		System.assertEquals(items.get('0.65-19').Ball_Count_fml_2__c,	784);
		System.assertEquals(items.get('0.65-21').Ball_Count_fml_2__c,	961);
		System.assertEquals(items.get('0.65-23').Ball_Count_fml_2__c,	1156);
		System.assertEquals(items.get('0.65-25').Ball_Count_fml_2__c,	1369);
		System.assertEquals(items.get('0.65-27').Ball_Count_fml_2__c,	1600);
		System.assertEquals(items.get('0.65-29').Ball_Count_fml_2__c,	1849);
		System.assertEquals(items.get('0.65-31').Ball_Count_fml_2__c,	2116);
		System.assertEquals(items.get('0.65-33').Ball_Count_fml_2__c,	2500);
		System.assertEquals(items.get('0.65-35').Ball_Count_fml_2__c,	2809);
		System.assertEquals(items.get('0.65-37.5').Ball_Count_fml_2__c,	3136);
		System.assertEquals(items.get('0.65-40').Ball_Count_fml_2__c,	3600);
		System.assertEquals(items.get('0.65-42.5').Ball_Count_fml_2__c,	4096);
		System.assertEquals(items.get('0.65-45').Ball_Count_fml_2__c,	4624);
		System.assertEquals(items.get('0.65-47.5').Ball_Count_fml_2__c,	5184);
		System.assertEquals(items.get('0.65-50').Ball_Count_fml_2__c,	5776);
		System.assertEquals(items.get('0.65-52.5').Ball_Count_fml_2__c,	6400);
		System.assertEquals(items.get('0.65-55').Ball_Count_fml_2__c,	6889);
		System.assertEquals(items.get('0.50-10').Ball_Count_fml_2__c,	361);
		System.assertEquals(items.get('0.50-11').Ball_Count_fml_2__c,	441);
		System.assertEquals(items.get('0.50-12').Ball_Count_fml_2__c,	529);
		System.assertEquals(items.get('0.50-13').Ball_Count_fml_2__c,	625);
		System.assertEquals(items.get('0.50-14').Ball_Count_fml_2__c,	729);
		System.assertEquals(items.get('0.50-15').Ball_Count_fml_2__c,	841);
		System.assertEquals(items.get('0.50-17').Ball_Count_fml_2__c,	1089);
		System.assertEquals(items.get('0.50-19').Ball_Count_fml_2__c,	1369);
		System.assertEquals(items.get('0.50-21').Ball_Count_fml_2__c,	1681);
		System.assertEquals(items.get('0.50-23').Ball_Count_fml_2__c,	2025);
		System.assertEquals(items.get('0.50-25').Ball_Count_fml_2__c,	2401);
		System.assertEquals(items.get('0.50-27').Ball_Count_fml_2__c,	2809);
		System.assertEquals(items.get('0.50-29').Ball_Count_fml_2__c,	3249);
		System.assertEquals(items.get('0.50-31').Ball_Count_fml_2__c,	3721);
		System.assertEquals(items.get('0.50-33').Ball_Count_fml_2__c,	4225);
		System.assertEquals(items.get('0.50-35').Ball_Count_fml_2__c,	4761);
		System.assertEquals(items.get('0.50-37.5').Ball_Count_fml_2__c,	5476);
		System.assertEquals(items.get('0.50-40').Ball_Count_fml_2__c,	6241);
		System.assertEquals(items.get('0.50-42.5').Ball_Count_fml_2__c,	7056);
		System.assertEquals(items.get('0.50-45').Ball_Count_fml_2__c,	7921);
		System.assertEquals(items.get('0.50-47.5').Ball_Count_fml_2__c,	8836);
		System.assertEquals(items.get('0.50-50').Ball_Count_fml_2__c,	9801);
		System.assertEquals(items.get('0.50-52.5').Ball_Count_fml_2__c,	1081);
		System.assertEquals(items.get('0.50-55').Ball_Count_fml_2__c,	1188);

		System.assertEquals(items.get('null-55').Ball_Count_fml_2__c,	0);
		System.assertEquals(items.get('0.50-null').Ball_Count_fml_2__c,	0);

	}
}